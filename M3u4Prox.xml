<?xml version="1.0"?>
<Container version="2">
  <Name>M3u4Prox</Name>
  <Repository>ghcr.io/brycelarge/m3u4proxy</Repository>
  <Registry>https://github.com/brycelarge/M3u4Proxy</Registry>
  <Network>bridge</Network>
  <Shell>bash</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/brycelarge/M3u4Proxy</Support>
  <Project>https://github.com/brycelarge/M3u4Proxy</Project>
  <Overview>M3u4Prox is a full-stack IPTV playlist manager that makes IPTV easy. Supports many feeds and many outputs with a clean, responsive interface that works on desktop and mobile devices.</Overview>
  <Category>MediaServer:Video Network:Management</Category>
  <WebUI>http://[IP]:[PORT:3005]/</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/brycelarge/unraid-templates/main/M3u4Prox.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/brycelarge/M3u4Proxy/main/public/logo.svg</Icon>
  <ExtraParams>--cap-add=NET_ADMIN --device=/dev/net/tun</ExtraParams>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Requires>See https://github.com/brycelarge/M3u4Proxy for setup instructions and https://github.com/brycelarge/openvpn-buildtools for VPN configuration.</Requires>
  <!-- Ports -->
  <Config Name="WebUI Port" Target="PORT" Default="3005" Mode="tcp" Description="Web UI and API port" Type="Port" Display="always" Required="true" Mask="false">3005</Config>
  <Config Name="HDHomeRun Port" Target="HDHR_PORT" Default="5004" Mode="tcp" Description="HDHomeRun virtual tuner port for Plex/Emby/Jellyfin" Type="Port" Display="always" Required="false" Mask="false">5004</Config>
  <Config Name="Privoxy Port" Target="PRIVOXY_PORT" Default="8118" Mode="tcp" Description="Privoxy HTTP proxy port (only needed if VPN enabled)" Type="Port" Display="advanced" Required="false" Mask="false">8118</Config>

  <!-- Volumes -->
  <Config Name="Data Path" Target="/data" Default="/mnt/user/appdata/m3u4prox" Mode="rw" Description="All application data (DB, playlists, EPG, configs)" Type="Path" Display="always" Required="true" Mask="false">/mnt/user/appdata/m3u4prox</Config>

  <!-- Application -->
  <Config Name="Admin Password" Target="ADMIN_PASSWORD" Default="admin" Mode="" Description="Admin login password" Type="Variable" Display="always" Required="false" Mask="true">admin</Config>
  <Config Name="TMDB API Key" Target="TMDB_API_KEY" Default="" Mode="" Description="TMDB API key for EPG enrichment (optional)" Type="Variable" Display="advanced" Required="false" Mask="false"></Config>
  <Config Name="Host IP" Target="HOST_IP" Default="" Mode="" Description="Host IP for HDHomeRun discovery (optional)" Type="Variable" Display="advanced" Required="false" Mask="false"></Config>

  <!-- VPN -->
  <Config Name="VPN Enabled" Target="VPN_ENABLED" Default="false" Mode="" Description="Enable OpenVPN tunnel" Type="Variable" Display="always" Required="false" Mask="false">false</Config>
  <Config Name="VPN Provider" Target="OPENVPN_PROVIDER" Default="CUSTOM" Mode="" Description="VPN provider: NORDVPN, PIA, SURFSHARK, IPVANISH, VYPRVPN, PROTONVPN, CUSTOM" Type="Variable" Display="always" Required="false" Mask="false">CUSTOM</Config>
  <Config Name="VPN Config" Target="OPENVPN_CONFIG" Default="" Mode="" Description="Specific .ovpn config name to use. Leave blank to use first available." Type="Variable" Display="always" Required="false" Mask="false"></Config>
  <Config Name="VPN Username" Target="OPENVPN_USERNAME" Default="" Mode="" Description="VPN service username" Type="Variable" Display="always" Required="false" Mask="false"></Config>
  <Config Name="VPN Password" Target="OPENVPN_PASSWORD" Default="" Mode="" Description="VPN service password" Type="Variable" Display="always" Required="false" Mask="true"></Config>

  <!-- EPG -->
  <Config Name="EPG Grab Days" Target="EPG_GRAB_DAYS" Default="3" Mode="" Description="Number of days of EPG data to fetch" Type="Variable" Display="advanced" Required="false" Mask="false">3</Config>
  <Config Name="EPG Grab Delay" Target="EPG_GRAB_DELAY" Default="500" Mode="" Description="Delay between EPG requests (ms)" Type="Variable" Display="advanced" Required="false" Mask="false">500</Config>
  <Config Name="EPG Grab Timeout" Target="EPG_GRAB_TIMEOUT" Default="15000" Mode="" Description="EPG request timeout (ms)" Type="Variable" Display="advanced" Required="false" Mask="false">15000</Config>
  <Config Name="EPG Grab Connections" Target="EPG_GRAB_CONNECTIONS" Default="4" Mode="" Description="Max concurrent EPG connections" Type="Variable" Display="advanced" Required="false" Mask="false">4</Config>
  <Config Name="EPG Grab Cron" Target="EPG_GRAB_CRON" Default="0 4 * * *" Mode="" Description="EPG grab schedule (cron format)" Type="Variable" Display="advanced" Required="false" Mask="false">0 4 * * *</Config>
  <Config Name="EPG Sync Cron" Target="EPG_SYNC_CRON" Default="0 3 * * 0" Mode="" Description="EPG sync schedule (cron format)" Type="Variable" Display="advanced" Required="false" Mask="false">0 3 * * 0</Config>

  <!-- System -->
  <Config Name="PUID" Target="PUID" Default="99" Mode="" Description="User ID for file permissions (use Unraid's nobody: 99)" Type="Variable" Display="advanced" Required="false" Mask="false">99</Config>
  <Config Name="PGID" Target="PGID" Default="100" Mode="" Description="Group ID for file permissions (use Unraid's users: 100)" Type="Variable" Display="advanced" Required="false" Mask="false">100</Config>
  <Config Name="UMASK" Target="UMASK" Default="022" Mode="" Description="File creation umask" Type="Variable" Display="advanced" Required="false" Mask="false">022</Config>
  <Config Name="Timezone" Target="TZ" Default="UTC" Mode="" Description="Timezone (e.g. America/New_York)" Type="Variable" Display="advanced" Required="false" Mask="false">UTC</Config>

  <!-- Networking -->
  <Config Name="Local Network" Target="LOCAL_NETWORK" Default="" Mode="" Description="IMPORTANT: Set to your LAN subnet (e.g. 192.168.1.0/24) so the web UI stays accessible when VPN is connected. Comma-separated for multiple subnets." Type="Variable" Display="always" Required="false" Mask="false"></Config>
  <Config Name="DNS Servers" Target="DNS_SERVERS" Default="1.1.1.1,8.8.8.8" Mode="" Description="Comma-separated DNS servers to use inside the container" Type="Variable" Display="advanced" Required="false" Mask="false">1.1.1.1,8.8.8.8</Config>
</Container>
